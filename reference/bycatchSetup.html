<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Bycatch estimation model setup — bycatchSetup • BycatchEstimator</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Bycatch estimation model setup — bycatchSetup"><meta name="description" content="Sets global conditions and makes a preliminary data summary."><meta property="og:description" content="Sets global conditions and makes a preliminary data summary."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BycatchEstimator</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/InstallationGuide.html">Installing bycatch estimator</a></li>
    <li><a class="dropdown-item" href="../articles/UserGuide2.html">Bycatch-Estimator User Guide</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Bycatch estimation model setup</h1>

      <div class="d-none name"><code>bycatchSetup.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Sets global conditions and makes a preliminary data summary.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">bycatchSetup</span><span class="op">(</span></span>
<span>  modelTry <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Delta-Lognormal"</span>, <span class="st">"Delta-Gamma"</span>, <span class="st">"TMBnbinom1"</span>, <span class="st">"TMBnbinom2"</span>,</span>
<span>    <span class="st">"TMBtweedie"</span><span class="op">)</span>,</span>
<span>  <span class="va">obsdat</span>,</span>
<span>  <span class="va">logdat</span>,</span>
<span>  <span class="va">yearVar</span>,</span>
<span>  <span class="va">obsEffort</span>,</span>
<span>  <span class="va">logEffort</span>,</span>
<span>  logUnsampledEffort <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  includeObsCatch <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  matchColumn <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  <span class="va">factorNames</span>,</span>
<span>  randomEffects <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  randomEffects2 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  EstimateIndex <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">EstimateBycatch</span>,</span>
<span>  <span class="va">logNum</span>,</span>
<span>  <span class="va">sampleUnit</span>,</span>
<span>  <span class="va">complexModel</span>,</span>
<span>  <span class="va">simpleModel</span>,</span>
<span>  indexModel <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  designMethods <span class="op">=</span> <span class="st">"None"</span>,</span>
<span>  designVars <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span>  designPooling <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  poolTypes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pooledVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  adjacentNum <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  minStrataUnit <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  baseDir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">runName</span>,</span>
<span>  <span class="va">runDescription</span>,</span>
<span>  <span class="va">common</span>,</span>
<span>  <span class="va">sp</span>,</span>
<span>  <span class="va">obsCatch</span>,</span>
<span>  <span class="va">catchUnit</span>,</span>
<span>  <span class="va">catchType</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-modeltry">modelTry<a class="anchor" aria-label="anchor" href="#arg-modeltry"></a></dt>
<dd><p>Specify which observation error models to try. Options are: "Binomial", "Normal","Lognormal", "Delta-Lognormal", and "Delta-Gamma", for models using the lm and glm functions, "NegBin" for Negative binomial using glm.nb in the MASS library, "Tweedie" for Tweedie GLM from the cpglm function in the cplm library, and "TMBbinomial","TMBnormal", "TMBlognormal", "TMBdelta-Lognormal","TMBdelta-Gamma", "TMBnbinom1", "TMBnbinom2", and "TMBtweedie" for the corresponding models from the glmmTMB library. Binomial or TMBbinomial will be run automatically as part of the delta models if any of them are selected. @param obsdat Observer data set</p></dd>


<dt id="arg-obsdat">obsdat<a class="anchor" aria-label="anchor" href="#arg-obsdat"></a></dt>
<dd><p>Observer data set</p></dd>


<dt id="arg-logdat">logdat<a class="anchor" aria-label="anchor" href="#arg-logdat"></a></dt>
<dd><p>Logbook data set</p></dd>


<dt id="arg-yearvar">yearVar<a class="anchor" aria-label="anchor" href="#arg-yearvar"></a></dt>
<dd><p>Character. The name of the year variable in <code>obsdat</code> and <code>logdat</code>. Both input files must contain the same variable name for year.</p></dd>


<dt id="arg-obseffort">obsEffort<a class="anchor" aria-label="anchor" href="#arg-obseffort"></a></dt>
<dd><p>Character. The name of the effort variable in <code>obsdat</code>. This variable must have the same effort units as <code>logEffort</code></p></dd>


<dt id="arg-logeffort">logEffort<a class="anchor" aria-label="anchor" href="#arg-logeffort"></a></dt>
<dd><p>Character. The name of the effort variable in <code>logdat</code>. Optional and only used when estimating bycatch. This variable must have the same effort units as <code>obsEffort</code></p></dd>


<dt id="arg-logunsampledeffort">logUnsampledEffort<a class="anchor" aria-label="anchor" href="#arg-logunsampledeffort"></a></dt>
<dd><p>Character. The name of the unsampled effort variable in in <code>logdat</code>. Optional and used to specify a column for effort that is not sampled, in trips with observers. This can be zero in all cases if observers sample 100% of effort in sampled trips. Only used when <code>includeObsCatch</code> is TRUE</p></dd>


<dt id="arg-includeobscatch">includeObsCatch<a class="anchor" aria-label="anchor" href="#arg-includeobscatch"></a></dt>
<dd><p>Logical. Set to TRUE if (1) the observed sample units can be matched to the logbook sample units and (2) you want to calculate total bycatch as the observed bycatch plus the predicted unobserved bycatch. This doesn't work with aggregated logbook effort.</p></dd>


<dt id="arg-matchcolumn">matchColumn<a class="anchor" aria-label="anchor" href="#arg-matchcolumn"></a></dt>
<dd><p>Character. If <code>includeObsCatch</code> is TRUE, give the name of the column that matches sample units between the observer and logbook data. Otherwise, this can be NA</p></dd>


<dt id="arg-factornames">factorNames<a class="anchor" aria-label="anchor" href="#arg-factornames"></a></dt>
<dd><p>Character vector. Specify which variables should be interpreted as categorical, ensuring imposes factor format on these variables. Variables not in this list will retain their original format. These variables must have identical names and factor levels in <code>obsdat</code> and <code>logdat</code></p></dd>


<dt id="arg-randomeffects">randomEffects<a class="anchor" aria-label="anchor" href="#arg-randomeffects"></a></dt>
<dd><p>Character vector. Random effects that should be included in all non-delta and binomial models, as a character vector in (e.g. "Year:area" to include Year:area as a random effect). Null if none. Note that random effects will be included in all models. The code will not evaluate whether they should be included.</p></dd>


<dt id="arg-randomeffects-">randomEffects2<a class="anchor" aria-label="anchor" href="#arg-randomeffects-"></a></dt>
<dd><p>Character vector. Random effects that should be included in the positive catch component of delta models, as a character vector in (e.g. "Year:area" to include Year:area as a random effect). Null if none. Note that random effects will be included in all models. The code will not evaluate whether they should be included.</p></dd>


<dt id="arg-estimateindex">EstimateIndex<a class="anchor" aria-label="anchor" href="#arg-estimateindex"></a></dt>
<dd><p>Logical. What would you like to estimate? You may calculate either an annual abundance index, or total bycatch, or both.</p></dd>


<dt id="arg-estimatebycatch">EstimateBycatch<a class="anchor" aria-label="anchor" href="#arg-estimatebycatch"></a></dt>
<dd><p>Logical. What would you like to estimate? You may calculate either an annual abundance index, or total bycatch, or both. If you want total bycatch, you must provide logbook data or some other source of total effort to <code>logdat</code>.</p></dd>


<dt id="arg-lognum">logNum<a class="anchor" aria-label="anchor" href="#arg-lognum"></a></dt>
<dd><p>Character vector. The name of the column in <code>logdat</code> that gives the number of sample units (e.g., trips or sets). If the logbook data is not aggregated (i.e. each row is a sample unit) set value to NA</p></dd>


<dt id="arg-sampleunit">sampleUnit<a class="anchor" aria-label="anchor" href="#arg-sampleunit"></a></dt>
<dd><p>Character. What is the sample unit in <code>logdat</code>? e.g. sets or trips.</p></dd>


<dt id="arg-complexmodel">complexModel<a class="anchor" aria-label="anchor" href="#arg-complexmodel"></a></dt>
<dd><p>Specify as stats::formula. Specify the most complex and simplest model to be considered. The code will find compare all intermediate models using information criteria. Include only fixed effects.</p></dd>


<dt id="arg-simplemodel">simpleModel<a class="anchor" aria-label="anchor" href="#arg-simplemodel"></a></dt>
<dd><p>Specify as stats::formula. This model includes all variables tha must be in the final bycatch estimation model</p></dd>


<dt id="arg-indexmodel">indexModel<a class="anchor" aria-label="anchor" href="#arg-indexmodel"></a></dt>
<dd><p>Specify as stats::formula. Use indexModel to specify which strata to keep separate in calculating abundance indices.</p></dd>


<dt id="arg-designmethods">designMethods<a class="anchor" aria-label="anchor" href="#arg-designmethods"></a></dt>
<dd><p>Character vector of methods to use for design based estimation. Current options are Ratio and Delta (for a delta-lognormal estimator).</p></dd>


<dt id="arg-designvars">designVars<a class="anchor" aria-label="anchor" href="#arg-designvars"></a></dt>
<dd><p>Specify strata that must be included in design based estimates, in order across which data should be pooled</p></dd>


<dt id="arg-designpooling">designPooling<a class="anchor" aria-label="anchor" href="#arg-designpooling"></a></dt>
<dd><p>TRUE if design-based estimates should be pooled for strata with missing data</p></dd>


<dt id="arg-pooltypes">poolTypes<a class="anchor" aria-label="anchor" href="#arg-pooltypes"></a></dt>
<dd><p>Type of pooling for each variable in designVars, as a character vector in the same order. Options are "all", "pooledVar" and (currently for year only) "adjacent"</p></dd>


<dt id="arg-pooledvar">pooledVar<a class="anchor" aria-label="anchor" href="#arg-pooledvar"></a></dt>
<dd><p>Variables to pool over for any variable with pooledVar in the previous line, as a character vector in the same order as designVars. Use NA for variables with other pooling methods.  This can be used to pool (for example) months into seasons when pooling is needed.</p></dd>


<dt id="arg-adjacentnum">adjacentNum<a class="anchor" aria-label="anchor" href="#arg-adjacentnum"></a></dt>
<dd><p>Number of adjacent years to include for adjacent pooling, as a numberical vector in the same order as designVars. NA for anything other than year.</p></dd>


<dt id="arg-minstrataunit">minStrataUnit<a class="anchor" aria-label="anchor" href="#arg-minstrataunit"></a></dt>
<dd><p>The smallest sample size in the strata defined by designVars that is acceptable, in sample units (e.g. trips)</p></dd>


<dt id="arg-basedir">baseDir<a class="anchor" aria-label="anchor" href="#arg-basedir"></a></dt>
<dd><p>Character. A directory to save output. Defaults to current working directory.</p></dd>


<dt id="arg-runname">runName<a class="anchor" aria-label="anchor" href="#arg-runname"></a></dt>
<dd><p>Characer. Give a name to the run, which will be used to set up a directory for the outputs</p></dd>


<dt id="arg-rundescription">runDescription<a class="anchor" aria-label="anchor" href="#arg-rundescription"></a></dt>
<dd><p>Character. Brief summary of the run, which will be used to set up a directory for the outputs</p></dd>


<dt id="arg-common">common<a class="anchor" aria-label="anchor" href="#arg-common"></a></dt>
<dd><p>Character vector. Provide a common name for the species used in bycatch and index estimation. Can be a vector of names to do multiple species at the same time.</p></dd>


<dt id="arg-sp">sp<a class="anchor" aria-label="anchor" href="#arg-sp"></a></dt>
<dd><p>Character vector. Provide a scientific name for the species used in bycatch and index estimation. Can be a vector of names to do multiple species at the same time</p></dd>


<dt id="arg-obscatch">obsCatch<a class="anchor" aria-label="anchor" href="#arg-obscatch"></a></dt>
<dd><p>Character vector. The name of the column(s) in <code>obsdat</code> that contain catch. If it is a vector, order of variable names must follow the same order as names provided in <code>common</code> and <code>sp</code></p></dd>


<dt id="arg-catchunit">catchUnit<a class="anchor" aria-label="anchor" href="#arg-catchunit"></a></dt>
<dd><p>Character vector. Give units of catch (e.g., number) to go in plot labels. Must be a vector of the same length as <code>sp</code></p></dd>


<dt id="arg-catchtype">catchType<a class="anchor" aria-label="anchor" href="#arg-catchtype"></a></dt>
<dd><p>Character vector. Give type of catch (e.g., dead discards) to go in plot labels. Must be a vector of the same length as <code>sp</code></p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ebabcock.github.io/BycatchEstimator/">BycatchEstimator</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">setupObj</span><span class="op">&lt;-</span><span class="fu">bycatchSetup</span><span class="op">(</span></span></span>
<span class="r-in"><span>modelTry <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Delta-Lognormal"</span>,<span class="st">"TMBnbinom2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>obsdat <span class="op">=</span> <span class="va">obsdatExample</span>,</span></span>
<span class="r-in"><span>logdat <span class="op">=</span> <span class="va">logdatExample</span>,</span></span>
<span class="r-in"><span>yearVar <span class="op">=</span> <span class="st">"Year"</span>,</span></span>
<span class="r-in"><span>obsEffort <span class="op">=</span> <span class="st">"sampled.sets"</span>,</span></span>
<span class="r-in"><span>logEffort <span class="op">=</span> <span class="st">"sets"</span>,</span></span>
<span class="r-in"><span>logUnsampledEffort <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>includeObsCatch  <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>matchColumn <span class="op">=</span> <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>factorNames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Year"</span>,<span class="st">"season"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>randomEffects <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>randomEffects2 <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>EstimateIndex <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>EstimateBycatch <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>logNum <span class="op">=</span> <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>sampleUnit <span class="op">=</span> <span class="st">"trips"</span>,</span></span>
<span class="r-in"><span>complexModel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="op">(</span><span class="va">Year</span><span class="op">+</span><span class="va">season</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>simpleModel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">Year</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>indexModel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">Year</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>designMethods <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ratio"</span>, <span class="st">"Delta"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>designVars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Year"</span>,<span class="st">"season"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>designPooling <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>poolTypes<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"adjacent"</span>,<span class="st">"all"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>pooledVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>adjacentNum<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>minStrataUnit <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>baseDir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>runName <span class="op">=</span> <span class="st">"SimulatedExample"</span>,</span></span>
<span class="r-in"><span>runDescription <span class="op">=</span> <span class="st">"Example with simulated data"</span>,</span></span>
<span class="r-in"><span>common <span class="op">=</span> <span class="st">"Simulated species"</span>,</span></span>
<span class="r-in"><span>sp <span class="op">=</span> <span class="st">"Genus species"</span>,</span></span>
<span class="r-in"><span>obsCatch <span class="op">=</span> <span class="st">"Catch"</span>,</span></span>
<span class="r-in"><span>catchUnit <span class="op">=</span> <span class="st">"number"</span>,</span></span>
<span class="r-in"><span>catchType <span class="op">=</span> <span class="st">"dead discard"</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Elizabeth Babcock.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

