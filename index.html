<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Generic Model-Based Bycatch Estimation Procedure • BycatchEstimator</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Generic Model-Based Bycatch Estimation Procedure">
<meta name="description" content="BycatchEstimator is used to estimate both total bycatch, calculated by expanding a sample, such as an observer database, to total effort from logbooks or landings records, and an annual index of abundance, calculated only from the observer data.">
<meta property="og:description" content="BycatchEstimator is used to estimate both total bycatch, calculated by expanding a sample, such as an observer database, to total effort from logbooks or landings records, and an annual index of abundance, calculated only from the observer data.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">BycatchEstimator</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/InstallationGuide.html">Installing BycatchEstimator</a></li>
    <li><a class="dropdown-item" href="articles/TransitionFrom2024Version.html">Transitioning to the new version of bycatchEstimator in 2025</a></li>
    <li><a class="dropdown-item" href="articles/UserGuide2.html">BycatchEstimator User Guide</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="bycatchestimator-">BycatchEstimator <img src="reference/figures/imgfile.png" align="right" width="120"><a class="anchor" aria-label="anchor" href="#bycatchestimator-"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>BycatchEstimator uses both model-based and design-based procedures to estimate total annual bycatch by expanding a sample, such as an observer database to the total effort from logbooks or landings records. The model framework can also be used to estimate an annual index of abundance, calculated only from the observer data. See the User’s Guide under articles at <a href="https://ebabcock.github.io/BycatchEstimator/" class="uri">https://ebabcock.github.io/BycatchEstimator/</a> for details. The source code is at <a href="https://github.com/ebabcock/BycatchEstimator" class="external-link uri">https://github.com/ebabcock/BycatchEstimator</a>. For a development version of a Shiny app that runs the data checks described below, go to <a href="https://natureanalytics.shinyapps.io/BycatchEstimator/" class="external-link uri">https://natureanalytics.shinyapps.io/BycatchEstimator/</a></p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The code runs best in R studio. Before running the code for the first time, install the latest versions of R and RStudio. The output figures and tables can be printed to an html or pdf file using R Markdown and the knitr library, which outputs a LaTex file. If you want to have the results in a pdf format, you must have a LaTex program installed, such as TinyTex (<a href="https://yihui.org/tinytex/" class="external-link uri">https://yihui.org/tinytex/</a>). The default is to have the results printed to a html file, from which you can extract figures and tables.</p>
<p>You can install the development version of BycatchEstimator from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ebabcock/BycatchEstimator"</span><span class="op">)</span></span></code></pre></div>
<p>For more help with installation, see the Installation Guide <a href="https://ebabcock.github.io/BycatchEstimator/" class="uri">https://ebabcock.github.io/BycatchEstimator/</a> Also, see the video tutorial at <a href="https://miami.zoom.us/rec/share/ec4dqzeZ4s_fuoVM8wb6B-a5npAwZZfV9tNciZpGaUMcQAYVLrJiWXQo5yXWjfVl.9Sl_3METqgD8O5l0?startTime=1751276745000" class="external-link uri">https://miami.zoom.us/rec/share/ec4dqzeZ4s_fuoVM8wb6B-a5npAwZZfV9tNciZpGaUMcQAYVLrJiWXQo5yXWjfVl.9Sl_3METqgD8O5l0?startTime=1751276745000</a> Passcode: gZ!tK8!n</p>
<p>If you have used older versions of this tool, see the the article on how to adjust your code to use the new version under articles at <a href="https://ebabcock.github.io/BycatchEstimator/" class="uri">https://ebabcock.github.io/BycatchEstimator/</a></p>
</div>
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>Due to a complication in coding, the user must load <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library(MuMIn)</a></code> in addition to <code><a href="https://ebabcock.github.io/BycatchEstimator/">library(BycatchEstimator)</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ebabcock.github.io/BycatchEstimator/">BycatchEstimator</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">MuMIn</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="llsim-example">LLSIM Example<a class="anchor" aria-label="anchor" href="#llsim-example"></a>
</h2>
<p>To demonstrate its use, example data sets are included in this R package. In this example, we will use data sets from LLSIM (Goodyear 2021).</p>
<div class="section level3">
<h3 id="logbook-data">Logbook data<a class="anchor" aria-label="anchor" href="#logbook-data"></a>
</h3>
<p>Simulation of longline fleets with LLSIM was conducted using three idealized fleets as described by Goodyear (2021). These fleets are a USA-like fleet (fleet 1), Japan-like fleet (fleet 2) and a Brazil-like fleet (fleet 3). The simulated data set included three fleets, with data spanning from 1990 to 2018 to reflect the approximate period for which observer coverage has been established. The species distribution model (SDM) and longline simulator generates a 3-dimensional distribution of blue marlin and swordfish throughout the Atlantic Ocean based on the habitat preferences of the species. Simulated longline sets are then generated by distributing hooks throughout the habitat of the species, consistent with the distribution, gear, hooks between floats, use of lightsticks and other characteristics of historical longline fishing fleets. While LLSIM initially produces set-level catches, both logbooks and observer databases were allocated by trip (Babcock and Goodyear 2021). Sets are allocated to trip if they were in the same gear, month and spatial area (5 x 5 squares). Trips with more than 100 sets were randomly allocated to different trips so that the median trips had about 20 sets.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">LLSIM_BUM_Example_logbook</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="observer-program-data">Observer program data<a class="anchor" aria-label="anchor" href="#observer-program-data"></a>
</h3>
<p>Observer program data are generated by passing the trip-level logbook data to an observer program sub-model. The observer sub-model assumes that observer coverage is randomly assigned to trips, with 5% coverage of trips. The entire trip is assumed to be observed.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">LLSIM_BUM_Example_observer</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="data-setup">Data setup<a class="anchor" aria-label="anchor" href="#data-setup"></a>
</h3>
<p>The first step in bycatch estimation is to set up the input file and review the data. The returned value from <code>bycatchSetup</code> is assigned as an object that will be used in subsequent steps. This first step also produces an html output (default) that is saved to the working directory for the user to review. This html output contains summary figures and tables showing the sample size and presence/absence of the bycatch species across levels of predictor variables, observer coverage levels, and raw trends in CPUE. <code>bycatchSetup</code> will also indicate if there are missing data or NAs with warning messages to the console and printed messages in the html output.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">setupObj</span><span class="op">&lt;-</span><span class="fu"><a href="reference/bycatchSetup.html">bycatchSetup</a></span><span class="op">(</span></span>
<span>  obsdat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/droplevels.html" class="external-link">droplevels</a></span><span class="op">(</span><span class="va">LLSIM_BUM_Example_observer</span><span class="op">[</span><span class="va">LLSIM_BUM_Example_observer</span><span class="op">$</span><span class="va">Year</span><span class="op">&gt;</span><span class="fl">2010</span> <span class="op">&amp;</span><span class="va">LLSIM_BUM_Example_observer</span><span class="op">$</span><span class="va">fleet</span><span class="op">==</span><span class="fl">2</span>,<span class="op">]</span><span class="op">)</span>,</span>
<span>  logdat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/droplevels.html" class="external-link">droplevels</a></span><span class="op">(</span><span class="va">LLSIM_BUM_Example_logbook</span><span class="op">[</span><span class="va">LLSIM_BUM_Example_logbook</span><span class="op">$</span><span class="va">Year</span><span class="op">&gt;</span><span class="fl">2010</span> <span class="op">&amp;</span> <span class="va">LLSIM_BUM_Example_logbook</span><span class="op">$</span><span class="va">fleet</span><span class="op">==</span><span class="fl">2</span>,<span class="op">]</span><span class="op">)</span>,</span>
<span>  yearVar <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span>  obsEffort <span class="op">=</span> <span class="st">"hooks"</span>,</span>
<span>  logEffort <span class="op">=</span> <span class="st">"hooks"</span>,</span>
<span>  obsCatch <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SWO"</span>,<span class="st">"BUM"</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, <span class="co"># selecting Blue marlin catch</span></span>
<span>  catchUnit <span class="op">=</span> <span class="st">"number"</span>,</span>
<span>  catchType <span class="op">=</span> <span class="st">"catch"</span>,</span>
<span>  logNum <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  sampleUnit <span class="op">=</span> <span class="st">"trips"</span>,</span>
<span>  factorVariables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Year"</span>,<span class="st">"area"</span>,<span class="st">"season"</span><span class="op">)</span>,</span>
<span>  numericVariables <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  EstimateBycatch <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  baseDir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  runName <span class="op">=</span> <span class="st">"LLSIMBUMtripExample"</span>,</span>
<span>  runDescription <span class="op">=</span> <span class="st">"LLSIMBUM by trip"</span>,</span>
<span>  common <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Swordfish"</span>,<span class="st">"Blue marlin"</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, <span class="co"># selecting Blue marlin</span></span>
<span>  sp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Xiphias gladius"</span>,<span class="st">"Makaira nigricans"</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, <span class="co"># selecting Blue marlin</span></span>
<span>  reportType <span class="op">=</span> <span class="st">"html"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="design-based-estimators">Design-based estimators<a class="anchor" aria-label="anchor" href="#design-based-estimators"></a>
</h3>
<p>Estimation of bycatch using design-based estimators is done with <code>bycatchDesign</code>, requiring the output of <code>bycatchSet</code> and other inputs. This uses a stratified ratio estimator or stratified delta-lognormal estimator, with stratification variables defined by the user. To deal with strata that have no observations or few observations, the user may request pooling, and specify the minimum number of sample units needed to avoid pooling. <code>bycatchDesign</code> also produces an html or pdf output with results to the specified directory.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">designObj</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bycatchDesign.html">bycatchDesign</a></span><span class="op">(</span></span>
<span>  setupObj <span class="op">=</span> <span class="va">setupObj</span>,</span>
<span>  designScenario <span class="op">=</span> <span class="st">"noPool"</span>,</span>
<span>  designMethods <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ratio"</span>, <span class="st">"Delta"</span><span class="op">)</span>,</span>
<span>  designVars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Year"</span>,<span class="st">"area"</span>,<span class="st">"season"</span><span class="op">)</span>,</span>
<span>  designPooling <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  poolTypes<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"adjacent"</span>,<span class="st">"all"</span>,<span class="st">"none"</span><span class="op">)</span>,</span>
<span>  pooledVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="cn">NA</span><span class="op">)</span>,</span>
<span>  adjacentNum<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="cn">NA</span><span class="op">)</span>,</span>
<span>  minStrataUnit <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  reportType<span class="op">=</span><span class="st">"html"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="model-based-estimators">Model-based estimators<a class="anchor" aria-label="anchor" href="#model-based-estimators"></a>
</h3>
<p>Estimation of bycatch and/or index of abundance is carried out by using the function <code>bycatchFit</code>. This function requires an object produced by <code>bycatchSetup</code>. Bycatch estimation is carried out by running linear models based on user-defined statistical distributions of observation error models (e.g. delta-lognormal, and negative binomial) with predictor variables (e.g., year, season, depth). The task of identifying a best approximating model is addressed through a semi-automated model selection process based on the user’s choice of information criteria (AICc, AIC or BIC) and cross validation. Once a best approximating model is identified, the standardized CPUE model is used to predict total bycatch in all logbook trips and summing across trips. The user needs to define the most complex model configuration and simple model configuration, and the function will fit all models in between. Random effects can also be specified, and the user needs to opt-in for doing cross validation. The default method for variance calculation is the simulation method, but other options are available. <code>bycatchFit</code> also produces an html or pdf output with results to the specified directory.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/bycatchFit.html">bycatchFit</a></span><span class="op">(</span></span>
<span>  setupObj <span class="op">=</span> <span class="va">setupObj</span>,</span>
<span>  modelScenario <span class="op">=</span> <span class="st">"s1"</span>,</span>
<span>  complexModel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">Year</span><span class="op">+</span><span class="va">area</span><span class="op">)</span>,</span>
<span>  simpleModel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">Year</span><span class="op">)</span>,</span>
<span>  indexModel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">Year</span><span class="op">)</span>,</span>
<span>  modelTry <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TMBnbinom1"</span>,<span class="st">"TMBtweedie"</span><span class="op">)</span>,</span>
<span>  randomEffects <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  randomEffects2 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  selectCriteria <span class="op">=</span> <span class="st">"BIC"</span>,</span>
<span>  DoCrossValidation <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  CIval <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  VarCalc <span class="op">=</span> <span class="st">"Simulate"</span>,</span>
<span>  useParallel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  nSims <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  plotValidation <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  trueVals <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  trueCols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  reportType <span class="op">=</span> <span class="st">"html"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Goodyear, C.P. 2021. Development of new model fisheries for simulating longline catch data with LLSIM. Collect. Vol. Sci. Pap. ICCAT, 78(5): 53-62</p>
<p>Babcock, E.A. and C. P. Goodyear. 2021. Testing a bycatch estimation tool using simulated blue marlin longline data. ICCAT Collective Volume of Scientific Papers, 78(5): 179-189.</p>
<p>Babcock E. A., W. J. Harford, T. Gedamke, D. Soto, and C. P. Goodyear. 2022. Efficacy of a bycatch estimation tool. ICCAT Collective Volume of Scientific Papers 79(5): 304-339</p>
<p>Babcock, E. A., W. J. Harford, T. Gedamke, S. Anderson, and C. P. Goodyear. 2023. Simulation-Testing Model-Based and Design-Based Bycatch Estimators. ICCAT Collective Volume of Scientific Papers 80 (6): 51–79.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing BycatchEstimator</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Elizabeth Babcock <br><small class="roles"> Author, maintainer </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Elizabeth Babcock.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
