<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="BycatchEstimator is used to estimate both total bycatch, calculated by expanding a sample, such as an observer database, to total effort from logbooks or landings records, and an annual index of abundance, calculated only from the observer data.">
<title>Generic Model-Based Bycatch Estimation Procedure • BycatchEstimator</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Generic Model-Based Bycatch Estimation Procedure">
<meta property="og:description" content="BycatchEstimator is used to estimate both total bycatch, calculated by expanding a sample, such as an observer database, to total effort from logbooks or landings records, and an annual index of abundance, calculated only from the observer data.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">BycatchEstimator</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/UserGuide2.html">Bycatch-Estimator User Guide</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="bycatchestimator-">BycatchEstimator <img src="reference/figures/imgfile.png" align="right" width="120"><a class="anchor" aria-label="anchor" href="#bycatchestimator-"></a>
</h1></div>
<!-- badges: start --><!-- badges: end --><p>BycatchEstimator is used to estimate both total bycatch, calculated by expanding a sample, such as an observer database, to total effort from logbooks or landings records, and an annual index of abundance, calculated only from the observer data.</p>
<p>BycatchEstimator uses a model-based procedure to estimate total annual bycatch by expanding a sample, such as an observer database, in relation to total effort from logbooks or landings records. This framework can also be used to estimate an annual index of abundance, calculated only from the observer data. Using this tool, bycatch estimation by fitting generalized linear models based on user-defined statistical distributions of observation error models (e.g. delta-lognormal, and negative binomial) and with predictor variables (e.g., year, season, depth). The complexity of the task of identifying a best approximating model is addressed through a semi-automated model selection process based on the user’s choice of information criteria (AICc, AIC or BIC). Cross validation may then be used to selectthe best observation error model across. Once a best approximating modelis identified, the standardized CPUE model is used to predict total bycatch in all logbook trips (or alternatively, only unobserved trips)and summing across trips. This bycatch estimation tool has been developed as an accessible R package.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The code runs best in RStudio. Before running the code for the first time, install the latest versions of R and RStudio. The output figures and tables are printed to a pdf file using R Markdown and the knitr library, which outputs a LaTex file; therefore, you must have a LaTex program installed, such as TinyTex.</p>
<p>You can install the development version of BycatchEstimator from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ebabcock/BycatchEstimator"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>Due to a complication in coding, the user must load <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library(MuMIn)</a></code> in addition to <code><a href="https://ebabcock.github.io/BycatchEstimator/">library(BycatchEstimator)</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ebabcock.github.io/BycatchEstimator/">BycatchEstimator</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">MuMIn</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="llsim-example">LLSIM Example<a class="anchor" aria-label="anchor" href="#llsim-example"></a>
</h2>
<p>To demonstrate its use, example data sets are included in this R package. In this example, we will use data sets from LLSIM (Goodyear 2021).</p>
<div class="section level3">
<h3 id="logbook-data">Logbook data<a class="anchor" aria-label="anchor" href="#logbook-data"></a>
</h3>
<p>Simulation of longline fleets with LLSIM was conducted using three idealized fleets as described by Goodyear (2021). These fleets are a USA-like fleet (fleet 1), Japan-like fleet (fleet 2) and a Brazil-like fleet (fleet 3). The simulated data set included three fleets, with data spanning from 1990 to 2018 to reflect the approximate period for which observer coverage has been established. The species distribution model (SDM) and longline simulator (LLSIM) generates a 3-dimensional distribution of blue marlin and swordfish throughout the Atlantic Ocean based on the habitat preferences of the species. Simulated longline sets are then generated by distributing hooks throughout the habitat of the species, consistent with the distribution, gear, hooks between floats, use of lightsticks and other characteristics of historical longline fishing fleets. While LLSIM initially produces set-level catches, both logbooks and observer databases were allocated to trips in this example. Sets are allocated to the same trip if they were in the same gear, month and spatial area (5 x 5 squares). Trips with more than 100 sets were randomly allocated to different trips so that the median trips had about 20 sets. For this example, the sample unit is trips, and both the observer and logbook data have a single line per trip.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">LLSIM_BUM_Example_logbook</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="observer-program-data">Observer program data<a class="anchor" aria-label="anchor" href="#observer-program-data"></a>
</h3>
<p>Observer program data are generated by passing the trip-level logbook data to an observer program sub-model. The observer sub-model assumes that observer coverage is randomly assigned to trips, with 5% coverage of trips. The entire trip is assumed to be observed.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">LLSIM_BUM_Example_observer</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="model-setup">Model setup<a class="anchor" aria-label="anchor" href="#model-setup"></a>
</h3>
<p>The first step in bycatch estimation is to set up the input file and review and verify the data. Notice that returned value from <code>bycatchSetup</code> is assigned as an object that will be used in a subsequent step. This step also produces output that is saved to the working directory for the user to review. Review is essential to ensure that data have been correctly formatted and interpreted in model setup. In particular, make sure there are no years in which there were no observations of the species of interest, as this would prevent the models from working correctly.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">setupObj</span><span class="op">&lt;-</span><span class="fu"><a href="reference/bycatchSetup.html">bycatchSetup</a></span><span class="op">(</span>
  <span class="co">#modelTry = c("Lognormal","Delta-Lognormal","Delta-Gamma","TMBnbinom1","TMBnbinom2","TMBtweedie"),</span>
  modelTry <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Delta-Lognormal"</span>, <span class="st">"TMBnbinom2"</span><span class="op">)</span>,
  obsdat <span class="op">=</span> <span class="va">LLSIM_BUM_Example_observer</span>,
  logdat <span class="op">=</span> <span class="va">LLSIM_BUM_Example_logbook</span>,
  yearVar <span class="op">=</span> <span class="st">"Year"</span>,
  obsEffort <span class="op">=</span> <span class="st">"hooks"</span>,
  logEffort <span class="op">=</span> <span class="st">"hooks"</span>,
  logUnsampledEffort <span class="op">=</span> <span class="st">"unsampledEffort"</span>,
  includeObsCatch  <span class="op">=</span> <span class="cn">TRUE</span>,
  matchColumn <span class="op">=</span> <span class="st">"trip"</span>,
  factorNames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Year"</span>,<span class="st">"fleet"</span>,<span class="st">"area"</span>,<span class="st">"season"</span><span class="op">)</span>,
  EstimateIndex <span class="op">=</span> <span class="cn">TRUE</span>,
  EstimateBycatch <span class="op">=</span> <span class="cn">TRUE</span>,
  logNum <span class="op">=</span> <span class="cn">NA</span>,
  sampleUnit <span class="op">=</span> <span class="st">"trips"</span>,
  complexModel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">Year</span><span class="op">+</span><span class="va">fleet</span><span class="op">+</span><span class="va">hbf</span><span class="op">+</span><span class="va">area</span><span class="op">+</span><span class="va">season</span><span class="op">)</span>,
  simpleModel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">Year</span><span class="op">+</span><span class="va">fleet</span><span class="op">+</span><span class="va">area</span><span class="op">)</span>,
  indexModel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">Year</span><span class="op">+</span><span class="va">area</span><span class="op">)</span>,
  baseDir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,
  runName <span class="op">=</span> <span class="st">"LLSIMBUMtrip2022Aprilobs05mc"</span>,
  runDescription <span class="op">=</span> <span class="st">"LLSIm BUM by trip, with 5% observer coverage including observed catch in totals April 17 2022"</span>,
  common <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Swordfish"</span>,<span class="st">"Blue marlin"</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,
  sp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Xiphias gladius"</span>,<span class="st">"Makaira nigricans"</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,
  obsCatch <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SWO"</span>,<span class="st">"BUM"</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,
  catchUnit <span class="op">=</span> <span class="st">"number"</span>,
  catchType <span class="op">=</span> <span class="st">"catch"</span>
<span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="optional-step">Optional step<a class="anchor" aria-label="anchor" href="#optional-step"></a>
</h3>
<p>The output produced in step one includes the object returned by <code>bycatchSetup</code>. The naming convention for this object ends <code>_BycatchModelSpecification.rds</code>, as shown below. Thus, any model setup can be stored and later retrieved for analysis.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">setupObj</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span>file<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"/Output"</span>, <span class="st">"LLSIMBUMtrip2022Aprilobs05mc"</span><span class="op">)</span>,<span class="st">"/"</span>, <span class="st">"2022-05-02"</span>,<span class="st">"_BycatchModelSpecification.rds"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="model-fitting">Model fitting<a class="anchor" aria-label="anchor" href="#model-fitting"></a>
</h3>
<p>Estimation of bycatch and/or index of abundance is carried out by using the function <code>bycatchFit</code>. This function requires an object produced by <code>bycatchSetup</code> as well as several other arguments.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/bycatchFit.html">bycatchFit</a></span><span class="op">(</span>
  setupObj <span class="op">=</span> <span class="va">setupObj</span>,
  selectCriteria <span class="op">=</span> <span class="st">"BIC"</span>,
  DoCrossValidation <span class="op">=</span> <span class="cn">FALSE</span>,
  DredgeCrossValidation <span class="op">=</span> <span class="cn">FALSE</span>,
  ResidualTest <span class="op">=</span> <span class="cn">FALSE</span>,
  CIval <span class="op">=</span> <span class="fl">0.05</span>,
  VarCalc <span class="op">=</span> <span class="st">"None"</span>,
  useParallel <span class="op">=</span> <span class="cn">TRUE</span>,
  nSims <span class="op">=</span> <span class="fl">1000</span>,
  baseDir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,
  plotValidation <span class="op">=</span> <span class="cn">FALSE</span>,
  trueVals <span class="op">=</span> <span class="cn">NULL</span>,
  trueCols <span class="op">=</span> <span class="cn">NULL</span>,
  doReport <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Goodyear, C.P. 2021. Development of new model fisheries for simulating longline catch data with LLSIM. Collect. Vol. Sci. Pap. ICCAT, 78(5): 53-62</p>
<p>Babcock, E.A. and C. Phillip Goodyear. 2021. Testing a bycatch estimation tool using simulated blue marlin longline data. Collect. Vol. Sci. Pap. ICCAT, 78(5): 179-189</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ebabcock/BycatchEstimator" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>`use_mit_license()`, `use_gpl3_license()` or friends to pick a license</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing BycatchEstimator</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Elizabeth Babcock <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Elizabeth Babcock.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
