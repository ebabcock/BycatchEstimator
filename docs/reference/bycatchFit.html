<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Bycatch estimation using model-based estimators — bycatchFit • BycatchEstimator</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Bycatch estimation using model-based estimators — bycatchFit"><meta name="description" content="Produces model-based estimates of bycatch and annual abundance index."><meta property="og:description" content="Produces model-based estimates of bycatch and annual abundance index."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BycatchEstimator</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/InstallationGuide.html">Installing bycatch estimator</a></li>
    <li><a class="dropdown-item" href="../articles/TransitionFrom2024Version.html">Transitioning to the new version of bycatchEstimator in 2025</a></li>
    <li><a class="dropdown-item" href="../articles/UserGuide2.html">Bycatch-Estimator User Guide</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Bycatch estimation using model-based estimators</h1>

      <div class="d-none name"><code>bycatchFit.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Produces model-based estimates of bycatch and annual abundance index.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">bycatchFit</span><span class="op">(</span></span>
<span>  <span class="va">setupObj</span>,</span>
<span>  <span class="va">modelScenario</span>,</span>
<span>  <span class="va">complexModel</span>,</span>
<span>  <span class="va">simpleModel</span>,</span>
<span>  indexModel <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  modelTry <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Delta-Lognormal"</span>, <span class="st">"Delta-Gamma"</span>, <span class="st">"TMBnbinom1"</span>, <span class="st">"TMBnbinom2"</span>,</span>
<span>    <span class="st">"TMBtweedie"</span><span class="op">)</span>,</span>
<span>  randomEffects <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  randomEffects2 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  selectCriteria <span class="op">=</span> <span class="st">"BIC"</span>,</span>
<span>  DoCrossValidation <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  CIval <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  VarCalc <span class="op">=</span> <span class="st">"Simulate"</span>,</span>
<span>  includeObsCatch <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  matchColumn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  EstimateIndex <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  useParallel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  nSims <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  plotValidation <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  trueVals <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  trueCols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  reportType <span class="op">=</span> <span class="st">"html"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-setupobj">setupObj<a class="anchor" aria-label="anchor" href="#arg-setupobj"></a></dt>
<dd><p>An object produced by <code>bycatchSetup</code>.</p></dd>


<dt id="arg-modelscenario">modelScenario<a class="anchor" aria-label="anchor" href="#arg-modelscenario"></a></dt>
<dd><p>Short descriptor of model setup, eg. "s1", so output files will be different if you run more than one scenario with one setupObj.</p></dd>


<dt id="arg-complexmodel">complexModel<a class="anchor" aria-label="anchor" href="#arg-complexmodel"></a></dt>
<dd><p>Specify as stats::formula. Specify the most complex and simplest model to be considered. The code will find and compare all intermediate models using information criteria. Include only fixed effects.</p></dd>


<dt id="arg-simplemodel">simpleModel<a class="anchor" aria-label="anchor" href="#arg-simplemodel"></a></dt>
<dd><p>Specify as stats::formula. This model includes all variables that must be in the final bycatch estimation model</p></dd>


<dt id="arg-indexmodel">indexModel<a class="anchor" aria-label="anchor" href="#arg-indexmodel"></a></dt>
<dd><p>Specify as stats::formula. Use indexModel to specify which strata to keep separate in calculating abundance indices.</p></dd>


<dt id="arg-modeltry">modelTry<a class="anchor" aria-label="anchor" href="#arg-modeltry"></a></dt>
<dd><p>Specify which observation error models to try. Options are: "Binomial", "Normal","Lognormal", "Delta-Lognormal", and "Delta-Gamma", for models using the lm and glm functions, "NegBin" for Negative binomial using glm.nb in the MASS library, "Tweedie" for Tweedie GLM from the cpglm function in the cplm library, and "TMBbinomial","TMBnormal", "TMBlognormal", "TMBdelta-Lognormal","TMBdelta-Gamma", "TMBnbinom1", "TMBnbinom2", and "TMBtweedie" for the corresponding models from the glmmTMB library. Binomial or TMBbinomial will be run automatically as part of the delta models if any of them are selected.</p></dd>


<dt id="arg-randomeffects">randomEffects<a class="anchor" aria-label="anchor" href="#arg-randomeffects"></a></dt>
<dd><p>Character vector. Random effects that should be included in all non-delta and binomial models, as a character vector in (e.g. "Year:area" to include Year:area as a random effect). Null if none. Note that random effects will be included in all models. The code will not evaluate whether they should be included.</p></dd>


<dt id="arg-randomeffects-">randomEffects2<a class="anchor" aria-label="anchor" href="#arg-randomeffects-"></a></dt>
<dd><p>Character vector. Random effects that should be included in the positive catch component of delta models, as a character vector in (e.g. "Year:area" to include Year:area as a random effect). Null if none. Note that random effects will be included in all models. The code will not evaluate whether they should be included.</p></dd>


<dt id="arg-selectcriteria">selectCriteria<a class="anchor" aria-label="anchor" href="#arg-selectcriteria"></a></dt>
<dd><p>Character. Model selection criteria. Options are AICc, AIC and BIC</p></dd>


<dt id="arg-docrossvalidation">DoCrossValidation<a class="anchor" aria-label="anchor" href="#arg-docrossvalidation"></a></dt>
<dd><p>Specify whether to run a 10 fold cross-validation (TRUE or FALSE). This may not work with a small or unbalanced dataset</p></dd>


<dt id="arg-cival">CIval<a class="anchor" aria-label="anchor" href="#arg-cival"></a></dt>
<dd><p>Specify confidence interval for total bycatch estimates. Should be the alpha level, e.g. 0.05 for 95%</p></dd>


<dt id="arg-varcalc">VarCalc<a class="anchor" aria-label="anchor" href="#arg-varcalc"></a></dt>
<dd><p>Character. Variance calculation method. Options are: "Simulate","DeltaMethod", or "None".  Simulate will not work with a large number of sample units in the logbook data. The delta method for variance calculation is not implemented for the delta-lognormal or delta-gamma methods.</p></dd>


<dt id="arg-includeobscatch">includeObsCatch<a class="anchor" aria-label="anchor" href="#arg-includeobscatch"></a></dt>
<dd><p>Logical. Set to TRUE if (1) the observed sample units can be matched to the logbook sample units and (2) you want to calculate total bycatch as the observed bycatch plus the predicted unobserved bycatch. This doesn't work with aggregated logbook effort.</p></dd>


<dt id="arg-matchcolumn">matchColumn<a class="anchor" aria-label="anchor" href="#arg-matchcolumn"></a></dt>
<dd><p>Character. If <code>includeObsCatch</code> is TRUE, give the name of the column that matches sample units between the observer and logbook data. Otherwise, this can be NA</p></dd>


<dt id="arg-estimateindex">EstimateIndex<a class="anchor" aria-label="anchor" href="#arg-estimateindex"></a></dt>
<dd><p>Logical. What would you like to estimate? You may calculate either an annual abundance index, or total bycatch, or both.</p></dd>


<dt id="arg-useparallel">useParallel<a class="anchor" aria-label="anchor" href="#arg-useparallel"></a></dt>
<dd><p>Logical. Whether to conduct the analysis using parallel processing. Only initialized when more that two cores are available.</p></dd>


<dt id="arg-nsims">nSims<a class="anchor" aria-label="anchor" href="#arg-nsims"></a></dt>
<dd><p>Number of simulations used to calculate confidence intervals. Ignored if <code>VarCalc</code> set to "None"</p></dd>


<dt id="arg-plotvalidation">plotValidation<a class="anchor" aria-label="anchor" href="#arg-plotvalidation"></a></dt>
<dd><p>Logical. If you have true values of the total bycatch (for example in a simulation study), make plotValidation = TRUE and fill out the rest of the specification (trueVals and trueCols).</p></dd>


<dt id="arg-truevals">trueVals<a class="anchor" aria-label="anchor" href="#arg-truevals"></a></dt>
<dd><p>The data set that contains the true simulated total catches by year.</p></dd>


<dt id="arg-truecols">trueCols<a class="anchor" aria-label="anchor" href="#arg-truecols"></a></dt>
<dd><p>The column of the true simulated catches that contains true bycatch by year</p></dd>


<dt id="arg-reporttype">reportType<a class="anchor" aria-label="anchor" href="#arg-reporttype"></a></dt>
<dd><p>Character. Choose type of report to be produced. Options are pdf, html (default) or both.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ebabcock.github.io/BycatchEstimator/">BycatchEstimator</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#-------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">#Step 1. Run the datasetup function and review data inputs</span></span></span>
<span class="r-in"><span><span class="va">setupObj</span><span class="op">&lt;-</span><span class="fu"><a href="bycatchSetup.html">bycatchSetup</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>obsdat <span class="op">=</span> <span class="va">obsdatExample</span>,</span></span>
<span class="r-in"><span>logdat <span class="op">=</span> <span class="va">logdatExample</span>,</span></span>
<span class="r-in"><span>yearVar <span class="op">=</span> <span class="st">"Year"</span>,</span></span>
<span class="r-in"><span>obsEffort <span class="op">=</span> <span class="st">"sampled.sets"</span>,</span></span>
<span class="r-in"><span>logEffort <span class="op">=</span> <span class="st">"sets"</span>,</span></span>
<span class="r-in"><span>obsCatch <span class="op">=</span> <span class="st">"Catch"</span>,</span></span>
<span class="r-in"><span>catchUnit <span class="op">=</span> <span class="st">"number"</span>,</span></span>
<span class="r-in"><span>catchType <span class="op">=</span> <span class="st">"dead discard"</span>,</span></span>
<span class="r-in"><span>logNum <span class="op">=</span> <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>sampleUnit <span class="op">=</span> <span class="st">"trips"</span>,</span></span>
<span class="r-in"><span>factorVariables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Year"</span>,<span class="st">"season"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>numericVariables <span class="op">=</span> <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>EstimateBycatch <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>baseDir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>runName <span class="op">=</span> <span class="st">"SimulatedExample"</span>,</span></span>
<span class="r-in"><span>runDescription <span class="op">=</span> <span class="st">"Example with simulated data"</span>,</span></span>
<span class="r-in"><span>common <span class="op">=</span> <span class="st">"Simulated species"</span>,</span></span>
<span class="r-in"><span>sp <span class="op">=</span> <span class="st">"Genus species"</span>,</span></span>
<span class="r-in"><span>reportType <span class="op">=</span> <span class="st">"html"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span><span class="op">-</span></span></span>
<span class="r-in"><span><span class="co">#Step 2. Model fitting</span></span></span>
<span class="r-in"><span><span class="fu">bycatchFit</span><span class="op">(</span></span></span>
<span class="r-in"><span>setupObj <span class="op">=</span> <span class="va">setupObj</span>,</span></span>
<span class="r-in"><span>modelScenario <span class="op">=</span> <span class="st">"s1"</span>,</span></span>
<span class="r-in"><span>complexModel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="op">(</span><span class="va">Year</span><span class="op">+</span><span class="va">season</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>simpleModel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">Year</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>indexModel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">Year</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>modelTry <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Delta-Lognormal"</span>,<span class="st">"TMBnbinom2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>randomEffects <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>randomEffects2 <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>selectCriteria <span class="op">=</span> <span class="st">"BIC"</span>,</span></span>
<span class="r-in"><span>DoCrossValidation <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>CIval <span class="op">=</span> <span class="fl">0.05</span>,</span></span>
<span class="r-in"><span>VarCalc <span class="op">=</span> <span class="st">"Simulate"</span>,</span></span>
<span class="r-in"><span>includeObsCatch<span class="op">=</span><span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>matchColumn<span class="op">=</span><span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>EstimateIndex<span class="op">=</span><span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>useParallel <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>nSims <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>plotValidation <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>trueVals <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>trueCols <span class="op">=</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Elizabeth Babcock.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

