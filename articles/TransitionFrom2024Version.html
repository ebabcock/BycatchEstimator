<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Transitioning to the new version of bycatchEstimator in 2025 • BycatchEstimator</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Transitioning to the new version of bycatchEstimator in 2025">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BycatchEstimator</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/InstallationGuide.html">Installing BycatchEstimator</a></li>
    <li><a class="dropdown-item" href="../articles/TransitionFrom2024Version.html">Transitioning to the new version of bycatchEstimator in 2025</a></li>
    <li><a class="dropdown-item" href="../articles/UserGuide2.html">BycatchEstimator User Guide</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Transitioning to the new version of bycatchEstimator in 2025</h1>
                        <h4 data-toc-skip class="author">Beth
Babcock</h4>
            
            <h4 data-toc-skip class="date">2025-07-25</h4>
      

      <div class="d-none name"><code>TransitionFrom2024Version.Rmd</code></div>
    </div>

    
    
<p>For details of the current version of the code see the current user
guide. This page is intended to help those who are using the previous
version (version 0) from 2024 translate their old code into the new
format. If you wish to keep using version 0, you can install it using
the following code. This is not recommended, as the new versions has
corrections and new features:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ebabcock/BycatchEstimator@v0.0.9"</span><span class="op">)</span></span></code></pre></div>
<p>The improvements made in 2025 include the following.</p>
<ol style="list-style-type: decimal">
<li><p><code>bycatchSetup</code> was revised to provides a report (html
or pdf) with data warnings, plots and summaries to check whether the
data are appropriate for bycatch estimation, replacing dataCheck. You no
longer need to need to include any specifications for the model-based or
design-based estimation in this function call.</p></li>
<li><p><code>bycatchDesign</code> is a new function that does
design-based estimation only. The inputs are all the specifications for
design-based methods, including pooling, and outputs include a report
(html or pdf) with warnings, results and a summary of the pooling. It
allows for a designScenario designation so that multiple scenarios
(e.g. pooling choices) can be run from the same setupObj.</p></li>
<li><p><code>bycatchFit</code> now includes all the model specifications
such as modelTry, simpleModel and complexModel, and produces a report
for the model results only. It allows for a model Scenario designation
so that multiple scenarios can be run from the same setupObj.</p></li>
<li><p><code>loadInputs</code> allows the user to load all the R objects
from <code>bycatchDesign</code> or <code>bycatchFit</code> for further
analysis if desired.</p></li>
</ol>
<p>The following shows the old <code>bycatchSetup</code> example, with
the necessary changes in comments. The new output file includes data
warnings and summaries</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ebabcock.github.io/BycatchEstimator/">BycatchEstimator</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">MuMIn</span><span class="op">)</span></span>
<span><span class="va">setupObj</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/bycatchSetup.html">bycatchSetup</a></span><span class="op">(</span></span>
<span><span class="co">#  modelTry = c("TMBnbinom1"),              #Moved to bycatchFit</span></span>
<span>  obsdat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/droplevels.html" class="external-link">droplevels</a></span><span class="op">(</span><span class="va">LLSIM_BUM_Example_observer</span><span class="op">[</span><span class="va">LLSIM_BUM_Example_observer</span><span class="op">$</span><span class="va">Year</span><span class="op">&gt;</span><span class="fl">2010</span> <span class="op">&amp;</span><span class="va">LLSIM_BUM_Example_observer</span><span class="op">$</span><span class="va">fleet</span><span class="op">==</span><span class="fl">2</span>,<span class="op">]</span><span class="op">)</span>,</span>
<span>  logdat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/droplevels.html" class="external-link">droplevels</a></span><span class="op">(</span><span class="va">LLSIM_BUM_Example_logbook</span><span class="op">[</span><span class="va">LLSIM_BUM_Example_logbook</span><span class="op">$</span><span class="va">Year</span><span class="op">&gt;</span><span class="fl">2010</span> <span class="op">&amp;</span> <span class="va">LLSIM_BUM_Example_logbook</span><span class="op">$</span><span class="va">fleet</span><span class="op">==</span><span class="fl">2</span>,<span class="op">]</span><span class="op">)</span>,</span>
<span>  yearVar <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span>  obsEffort <span class="op">=</span> <span class="st">"hooks"</span>,</span>
<span>  logEffort <span class="op">=</span> <span class="st">"hooks"</span>,</span>
<span><span class="co">#  logUnsampledEffort = "unsampledEffort",  #Delete, this is no longer used</span></span>
<span><span class="co">#  factorNames = c("Year","area"),          #replaced with factorVariables</span></span>
<span>  factorVariables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Year"</span>,<span class="st">"area"</span><span class="op">)</span>,       <span class="co">#NEW, replaces factorNames</span></span>
<span>  numericVariables <span class="op">=</span> <span class="cn">NA</span>, <span class="co"># NEW</span></span>
<span>  EstimateBycatch <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span><span class="co">#  EstimateIndex = FALSE                    #Moved to bycatchFit</span></span>
<span>  logNum <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  sampleUnit <span class="op">=</span> <span class="st">"trips"</span>,</span>
<span><span class="co">#  complexModel = formula(y~Year+area),     #Moved to bycatchFit</span></span>
<span><span class="co">#  simpleModel = formula(y~Year),           #Moved to bycatchFit</span></span>
<span><span class="co">#  indexModel = formula(y~Year),            #Moved to bycatchFit</span></span>
<span> <span class="co"># designMethods = c("Ratio", "Delta"),     #Moved to bycatchDesign</span></span>
<span><span class="co"># designVars = c("Year","area"),          #Moved to bycatchDesign</span></span>
<span><span class="co"># designPooling = TRUE,                     #Moved to bycatchDesign</span></span>
<span><span class="co"># poolTypes=c("adjacent","all"),            #Moved to bycatchDesign</span></span>
<span><span class="co"># pooledVar=c(NA,NA),                       #Moved to bycatchDesign</span></span>
<span><span class="co"># adjacentNum=c(1,NA),                      #Moved to bycatchDesign</span></span>
<span>  baseDir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  runName <span class="op">=</span> <span class="st">"LLSIMBUMtripExample"</span>,</span>
<span>  runDescription <span class="op">=</span> <span class="st">"LLSIm BUM by trip"</span>,</span>
<span>  common <span class="op">=</span> <span class="st">"Blue marlin"</span>,</span>
<span>  sp <span class="op">=</span> <span class="st">"Makaira nigricans"</span>,</span>
<span>  obsCatch <span class="op">=</span><span class="st">"BUM"</span>,</span>
<span>  catchUnit <span class="op">=</span> <span class="st">"number"</span>,</span>
<span>  catchType <span class="op">=</span> <span class="st">"catch"</span>,</span>
<span>  reportType <span class="op">=</span> <span class="st">"html"</span>                       <span class="co">#NEW: specify html or pdf </span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The new <code>bycatchDesign</code> takes setupObj as an input, as
well as all the specifications for design-based estimators. There is a
new pooling option “none” for variables that should never by pooled.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/bycatchDesign.html">bycatchDesign</a></span><span class="op">(</span></span>
<span>setupObj <span class="op">=</span> <span class="va">setupObj</span>,</span>
<span>designScenario <span class="op">=</span> <span class="st">"noPool"</span>,                  <span class="co">#NEW:Name for output files </span></span>
<span>designMethods <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ratio"</span>, <span class="st">"Delta"</span><span class="op">)</span>,        <span class="co">#Moved here</span></span>
<span>designVars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Year"</span>,<span class="st">"area"</span><span class="op">)</span>,              <span class="co">#Moved here</span></span>
<span>groupVar <span class="op">=</span> <span class="st">"Year"</span>,                          <span class="co">#NEW:For plotting by a variable other than Year</span></span>
<span>designPooling <span class="op">=</span> <span class="cn">TRUE</span>,                       <span class="co">#Moved here</span></span>
<span>poolTypes<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"adjacent"</span>,<span class="st">"all"</span><span class="op">)</span>,              <span class="co">#Moved here</span></span>
<span>pooledVar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="cn">NA</span><span class="op">)</span>,                         <span class="co">#Moved here</span></span>
<span>adjacentNum<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="cn">NA</span><span class="op">)</span>,                        <span class="co">#Moved here</span></span>
<span>minStrataUnit <span class="op">=</span> <span class="fl">1</span>,                          <span class="co">#Moved here</span></span>
<span>reportType <span class="op">=</span> <span class="st">"html"</span>                         <span class="co">#NEW</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The new <code>bycatchFit</code> takes setupObj as an input, as well
as all the specifications for model-based estimators.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/bycatchFit.html">bycatchFit</a></span><span class="op">(</span></span>
<span>setupObj <span class="op">=</span> <span class="va">setupObj</span>, </span>
<span>modelScenario <span class="op">=</span> <span class="st">"s1"</span>,                       <span class="co">#NEW. Name included in output files</span></span>
<span>complexModel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="op">(</span><span class="va">Year</span><span class="op">+</span><span class="va">area</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span>,    <span class="co">#Moved here</span></span>
<span>simpleModel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">Year</span><span class="op">)</span>,              <span class="co">#Moved here</span></span>
<span>indexModel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">Year</span><span class="op">)</span>,               <span class="co">#Moved here</span></span>
<span>modelTry <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Delta-Lognormal"</span>,<span class="st">"TMBnbinom2"</span><span class="op">)</span>,     <span class="co">#Moved here</span></span>
<span>randomEffects <span class="op">=</span> <span class="cn">NULL</span>,                       <span class="co">#Moved here</span></span>
<span>randomEffects2 <span class="op">=</span> <span class="cn">NULL</span>,                      <span class="co">#Moved here</span></span>
<span>selectCriteria <span class="op">=</span> <span class="st">"BIC"</span>,                     </span>
<span>DoCrossValidation <span class="op">=</span> <span class="cn">TRUE</span>,                   </span>
<span><span class="co">#dredgeCrossValidation =FALSE,              #Option deleted</span></span>
<span><span class="co">#ResidualTest = FALSE,                      #Option deleted</span></span>
<span>CIval <span class="op">=</span> <span class="fl">0.05</span>,                               </span>
<span>VarCalc <span class="op">=</span> <span class="st">"Simulate"</span>,                       </span>
<span>includeObsCatch<span class="op">=</span><span class="cn">FALSE</span>,                      <span class="co">#Moved here</span></span>
<span>matchColumn<span class="op">=</span><span class="cn">NULL</span>,                           <span class="co">#Moved here</span></span>
<span>EstimateIndex<span class="op">=</span><span class="cn">FALSE</span>,                        <span class="co">#Moved here</span></span>
<span>useParallel <span class="op">=</span> <span class="cn">TRUE</span>,          </span>
<span>nSims <span class="op">=</span> <span class="fl">100</span>,</span>
<span>baseDir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>plotValidation <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>trueVals <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>trueCols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>reportType <span class="op">=</span> <span class="st">"html"</span>                         <span class="co">#NEW</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Some minor corrections have been made, along with new options, so the
new version of the code is recommended.</p>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Elizabeth Babcock.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
